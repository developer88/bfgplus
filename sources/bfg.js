// Generated by CoffeeScript 1.4.0
(function() {
  var Bfg, bfg;

  Bfg = (function() {

    function Bfg() {
      this.api_key = $("meta[name='bfg:api']").attr("content");
      this.userid = $("meta[name='bfg:user']").attr("content");
      this.locale = $("meta[name='bfg:locale']").attr("content");
      this.prepare_container();
      this.load_blog();
    }

    Bfg.prototype.prepare_container = function() {
      return $("#bfg div.bfg-container").html("<div class='bfg-message'></div><div class='bfg-body'></div>");
    };

    Bfg.prototype.blog_posts = function() {
      return this.posts;
    };

    Bfg.prototype.process_posts = function() {
      var post, posts;
      posts = this.blog_posts();
      this.d(posts);
      this.d(posts.length);
      if (posts.length > 0) {
        return this.render_posts((function() {
          var _i, _len, _results;
          _results = [];
          for (_i = 0, _len = posts.length; _i < _len; _i++) {
            post = posts[_i];
            _results.push(this.pack_post(post));
          }
          return _results;
        }).call(this));
      } else {

      }
    };

    Bfg.prototype.load_blog = function() {
      var _this = this;
      return $.getJSON('https://www.googleapis.com/plus/v1/people/' + this.userid + '/activities/public?key=' + this.api_key, function(data) {
        _this.posts = data['items'];
        return _this.process_posts();
      });
    };

    Bfg.prototype.load_post = function(id) {
      var post, post_html, _i, _len;
      if (parseInt(id) === 0) {
        return message($.t('app.messages.posts.not_found'));
      }
      for (_i = 0, _len = blog_posts.length; _i < _len; _i++) {
        post = blog_posts[_i];
        if (post['id'] === id) {
          post = post;
        }
      }
      post_html = unpack_post(post);
      return render_post(post_html);
    };

    Bfg.prototype.message = function(text, type) {
      if (type == null) {
        type = 'info';
      }
      return $("#bfg div.bfg-container div.bfg-body").html("<span class='bfg-message-" + type + "'>" + text + "</span>");
    };

    Bfg.prototype.pack_post = function(post) {
      return this.d(post);
    };

    Bfg.prototype.unpack_post = function(post) {};

    Bfg.prototype.render_posts = function(html) {
      return $("#bfg div.bfg-container div.bfg-body").html(html);
    };

    Bfg.prototype.render_post = function(html) {};

    Bfg.prototype.d = function(obj) {
      return console.log(obj);
    };

    return Bfg;

  })();

  bfg = new Bfg;

}).call(this);
